<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:fa="http://schemas.fontawesome.io/icons/"
    xmlns:sys="clr-namespace:System;assembly=mscorlib"
    xmlns:bw="clr-namespace:Basic.Windows"
    xmlns:enums="clr-namespace:Basic.Enums"
    xmlns:data="clr-namespace:System.Data;assembly=System.Data">
	<ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="pack://application:,,,/Basic.Persistent;component/Themes/SelectedSharp.Style.xaml" />
        <ResourceDictionary Source="pack://application:,,,/Basic.Persistent;component/Themes/ResourceEditor.Style.xaml" />
		<ResourceDictionary Source="pack://application:,,,/Basic.Persistent;component/Themes/GenericStyle.xaml" />
		<ResourceDictionary Source="pack://application:,,,/Basic.Persistent;component/Themes/Commands.Style.xaml" />
	</ResourceDictionary.MergedDictionaries>
    <Color x:Key="GlyphColor">#FF444444</Color>
    <Style TargetType="{x:Type bw:PropertyNode}">
        <Setter Property="PrimaryKey" Value="{Binding PrimaryKey}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type bw:PropertyNode}">
                    <Border Background="{TemplateBinding Background}" ToolTip="{Binding Comment}">
                        <BulletDecorator Margin="{TemplateBinding Padding}">
                            <BulletDecorator.Bullet>
                                <bw:OfficeImage x:Name="PART_ICON" Icon="I20109"/>
                                <!--<fa:ImageAwesome x:Name="PART_ICON" Icon="Key" VerticalAlignment="Center" HorizontalAlignment="Center" />-->
                            </BulletDecorator.Bullet>
                            <TextBlock Margin="5,0,0,0" Foreground="{TemplateBinding Foreground}">
                                <TextBlock.Text>
                                    <MultiBinding StringFormat="{}{0} : {1}{2}">
                                        <Binding Path="Name"/>
                                        <Binding Path="TypeName"/>
                                        <Binding Path="NullableText"/>
                                    </MultiBinding>
                                </TextBlock.Text>
                            </TextBlock>
                        </BulletDecorator>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="PrimaryKey" Value="True">
                            <Setter Property="Icon" TargetName="PART_ICON" Value="I20107"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style TargetType="{x:Type bw:CommandNode}">
        <Setter Property="CommandType" Value="{Binding CommandType}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type bw:CommandNode}">
                    <Border Background="{TemplateBinding Background}" >
                        <BulletDecorator Margin="{TemplateBinding Padding}">
                            <BulletDecorator.Bullet>
                                <bw:OfficeImage x:Name="PART_ICON" Icon="I20106"/>
                            </BulletDecorator.Bullet>
                            <TextBlock Margin="5,0,0,0" Foreground="{TemplateBinding Foreground}" Text="{Binding Name}"/>
                        </BulletDecorator>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="CommandType" Value="{x:Static data:CommandType.StoredProcedure}">
                            <Setter Property="Icon" TargetName="PART_ICON" Value="I20104"/>
                        </Trigger>
                        <Trigger Property="CommandType" Value="{x:Static data:CommandType.TableDirect}">
                            <Setter Property="Icon" TargetName="PART_ICON" Value="I20017"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style x:Key="CheckPath" TargetType="Path">
        <Setter Property="Visibility" Value="Collapsed"/>
        <Setter Property="Width" Value="7"/>
        <Setter Property="Height" Value="7"/>
        <Setter Property="StrokeThickness" Value="2"/>
        <Setter Property="SnapsToDevicePixels" Value="False"/>
    </Style>
    <Style TargetType="{x:Type bw:ImageCheckBox}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type bw:ImageCheckBox}">
                    <BulletDecorator Background="{TemplateBinding Background}" Margin="{TemplateBinding Margin}">
                        <BulletDecorator.Bullet>
                            <Border x:Name="Border" Width="13" Height="13" BorderThickness="2" BorderBrush="#FF444444">
                                <Grid>
                                    <Path x:Name="CheckMark" Data="M 0 0 L 7 7 M 0 7 L 7 0" Style="{StaticResource CheckPath}">
                                        <Path.Stroke>
                                            <SolidColorBrush Color="{StaticResource GlyphColor}" />
                                        </Path.Stroke>
                                    </Path>
                                    <Path x:Name="InderminateMark" Data="M 0 7 L 7 0" Style="{StaticResource CheckPath}">
                                        <Path.Stroke>
                                            <SolidColorBrush Color="{StaticResource GlyphColor}" />
                                        </Path.Stroke>
                                    </Path>
                                </Grid>
                            </Border>
                        </BulletDecorator.Bullet>
                        <Grid Margin="4,0,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Image Source="{TemplateBinding ImageSource}" VerticalAlignment="Center"/>
                            <TextBlock Grid.Column="1" Text="{TemplateBinding Content}"/>
                        </Grid>
                    </BulletDecorator>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsChecked" Value="True">
                            <Setter Property="Visibility" TargetName="CheckMark" Value="Visible"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style TargetType="{x:Type bw:ColumnBox}">
        <Setter Property="IsWhere" Value="{Binding IsWhere}"/>
        <Setter Property="PrimaryKey" Value="{Binding PrimaryKey}"/>
        <Setter Property="Group" Value="{Binding Group}"/>
        <Setter Property="HasAggregate" Value="{Binding HasAggregate}"/>
        <Setter Property="Content" Value="{Binding Name}"/>
        <Setter Property="SortOrder" Value="{Binding SortOrder, Mode=TwoWay}"/>
        <Setter Property="IsChecked" Value="{Binding Checked, Mode=TwoWay}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type bw:ColumnBox}">
                    <BulletDecorator Background="{TemplateBinding Background}" Margin="{TemplateBinding Margin}">
                        <BulletDecorator.Bullet>
                            <Border x:Name="Border" Width="13" Height="13" BorderThickness="2" BorderBrush="#FF444444">
                                <Path x:Name="CheckMark" Data="M 0 0 L 7 7 M 0 7 L 7 0" Style="{StaticResource CheckPath}">
                                    <Path.Stroke>
                                        <SolidColorBrush Color="{StaticResource GlyphColor}" />
                                    </Path.Stroke>
                                </Path>
                            </Border>
                        </BulletDecorator.Bullet>
                        <Grid Margin="4,0,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <bw:OfficeImage x:Name="PART_ICON" VerticalAlignment="Center" Icon="I20003"/>
                            <TextBlock Grid.Column="1" Text="{TemplateBinding Content}" Margin="0,0,5,0"/>
                            <bw:OfficeImage x:Name="PART_WHERE" VerticalAlignment="Center" Icon="I00899" Visibility="Collapsed" Grid.Column="2"/>
                            <bw:OfficeImage x:Name="PART_ORDER" VerticalAlignment="Center" Icon="I00210" Visibility="Collapsed" Grid.Column="3"/>
                            <bw:OfficeImage x:Name="PART_GROUP" VerticalAlignment="Center" Icon="I00504" Visibility="Collapsed" Grid.Column="4"/>
                        </Grid>
                    </BulletDecorator>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsChecked" Value="True">
                            <Setter Property="Visibility" TargetName="CheckMark" Value="Visible"/>
                        </Trigger>
                        <Trigger Property="PrimaryKey" Value="True">
                            <Setter Property="Icon" TargetName="PART_ICON" Value="I20013"/>
                        </Trigger>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsChecked" Value="True" />
                                <Condition Property="IsWhere" Value="True" />
                            </MultiTrigger.Conditions>
                            <Setter Property="Visibility" TargetName="PART_WHERE" Value="Visible"/>
                        </MultiTrigger>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsChecked" Value="True" />
                                <Condition Property="SortOrder" Value="{x:Static enums:OrderEnum.Ascending}" />
                            </MultiTrigger.Conditions>
                            <Setter Property="Visibility" TargetName="PART_ORDER" Value="Visible"/>
                            <Setter Property="Icon" TargetName="PART_ORDER" Value="I00210"/>
                        </MultiTrigger>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsChecked" Value="True" />
                                <Condition Property="SortOrder" Value="{x:Static enums:OrderEnum.Descending}" />
                            </MultiTrigger.Conditions>
                            <Setter Property="Visibility" TargetName="PART_ORDER" Value="Visible"/>
                            <Setter Property="Icon" TargetName="PART_ORDER" Value="I00211"/>
                        </MultiTrigger>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsChecked" Value="True" />
                                <Condition Property="Group" Value="True" />
                            </MultiTrigger.Conditions>
                            <Setter Property="Visibility" TargetName="PART_GROUP" Value="Visible"/>
                        </MultiTrigger>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsChecked" Value="True" />
                                <Condition Property="Group" Value="True" />
                                <Condition Property="HasAggregate" Value="True" />
                            </MultiTrigger.Conditions>
                            <Setter Property="Visibility" TargetName="PART_GROUP" Value="Visible"/>
                            <Setter Property="Icon" TargetName="PART_GROUP" Value="I00226"/>
                        </MultiTrigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style TargetType="{x:Type bw:ExpandButton}">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderBrush" Value="Transparent"/>
        <Setter Property="Foreground" Value="DarkGray"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="Focusable" Value="False"/>
        <Setter Property="Margin" Value="0,4,4,4"/>
        <Setter Property="Width" Value="18"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type bw:ExpandButton}">
                    <!--M0.5,0.5 L4.0,4.0 7.5,0.5 M0.5,4.5 L4.0,8.0 7.5,4.5-->
                    <Grid Background="{TemplateBinding Background}">
                        <Path x:Name="ToggleButton_Path" SnapsToDevicePixels="False" StrokeThickness="2"
                                Data="M0.5,5.0 L5.0,0.0 9.5,5.0 M0.5,10.0 L5.0,5.0 9.5,10.0" Stroke="{TemplateBinding Foreground}"
                                VerticalAlignment="Center" HorizontalAlignment="Center"/>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsChecked" Value="False">
                            <Setter TargetName="ToggleButton_Path" Property="LayoutTransform">
                                <Setter.Value>
                                    <RotateTransform Angle="180" />
                                </Setter.Value>
                            </Setter>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style x:Key="ContentStyle" TargetType="{x:Type TextBlock}">
        <Setter Property="VerticalAlignment" Value="Center"/>
        <Setter Property="Focusable" Value="False"/>
        <Setter Property="Margin" Value="0,5"/>
    </Style>
    <Style x:Key="ImageStyle" TargetType="{x:Type bw:OfficeImage}">
        <Setter Property="Focusable" Value="False"/>
        <Setter Property="IsHitTestVisible" Value="False"/>
        <Setter Property="Margin" Value="5,5,5,5"/>
    </Style>
    <Style x:Key="CommandNodeStyle" TargetType="TreeViewItem">
        <Setter Property="Template" >
            <Setter.Value>
                <ControlTemplate TargetType="TreeViewItem">
                    <bw:CommandNode x:Name="PART_NODE" Padding="12,0,2,0"/>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsSelected" Value="true">
                            <Setter Property="Background" TargetName="PART_NODE" Value="#FF3399FF" />
                            <Setter Property="Foreground" TargetName="PART_NODE" Value="White" />
                        </Trigger>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsSelected" Value="true"/>
                                <Condition Property="IsSelectionActive" Value="false"/>
                            </MultiTrigger.Conditions>
                            <Setter Property="Background" TargetName="PART_NODE" Value="#FF3399FF"/>
                            <Setter Property="Foreground" TargetName="PART_NODE" Value="White" />
                        </MultiTrigger>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style x:Key="PropertyNodeStyle" TargetType="TreeViewItem">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="TreeViewItem">
                    <bw:PropertyNode x:Name="PART_PropertyNode" Padding="12,0,2,0"/>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsSelected" Value="true">
                            <Setter Property="Background" TargetName="PART_PropertyNode" Value="#FF3399FF" />
                            <Setter Property="Foreground" TargetName="PART_PropertyNode" Value="White" />
                        </Trigger>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsSelected" Value="true"/>
                                <Condition Property="IsSelectionActive" Value="false"/>
                            </MultiTrigger.Conditions>
                            <Setter Property="Background" TargetName="PART_PropertyNode" Value="#FF3399FF"/>
                            <Setter Property="Foreground" TargetName="PART_PropertyNode" Value="White" />
                        </MultiTrigger>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Foreground" Value="{StaticResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <ControlTemplate x:Key="EntityTemplate" TargetType="{x:Type TreeViewItem}">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <bw:OfficeImage Icon="I20103" Style="{StaticResource ImageStyle}"/>
            <TextBlock Grid.Column="1" Text="{TemplateBinding Header}" Style="{StaticResource ContentStyle}"/>
            <bw:ExpandButton Grid.Column="2" x:Name="PART_Expander" IsChecked="{Binding Path=IsExpanded, RelativeSource={RelativeSource TemplatedParent}}"
								  ClickMode="Press"/>
            <Border x:Name="PART_ItemsBorder" MaxHeight="178" Grid.ColumnSpan="3" Grid.Row="1" BorderThickness="0,1,0,0" BorderBrush="DarkGray" Padding="0,3">
                <ScrollViewer MaxHeight="178" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Hidden">
                    <ScrollViewer.Resources>
                        <sys:Double x:Key="{x:Static SystemParameters.VerticalScrollBarWidthKey}">13</sys:Double>
                    </ScrollViewer.Resources>
                    <ItemsPresenter x:Name="PART_ItemsHost"/>
                </ScrollViewer>
            </Border>
        </Grid>
        <ControlTemplate.Triggers>
            <Trigger Property="IsExpanded" Value="false">
                <Setter Property="Visibility" TargetName="PART_ItemsBorder" Value="Collapsed"/>
                <Setter Property="Visibility" TargetName="PART_ItemsHost" Value="Collapsed"/>
            </Trigger>
            <Trigger Property="HasItems" Value="false">
                <Setter Property="Visibility" TargetName="PART_Expander" Value="Hidden"/>
                <Setter Property="Visibility" TargetName="PART_ItemsBorder" Value="Collapsed"/>
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>
    <ControlTemplate x:Key="ConditionTemplate" TargetType="{x:Type TreeViewItem}">
        <Border BorderThickness="0,1,0,0" BorderBrush="DarkGray" Padding="0">
            <Grid Name="ConditionTemplate_ItemGrid">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <bw:OfficeImage Icon="I20103" Style="{StaticResource ImageStyle}"/>
                <TextBlock Grid.Column="1" Text="{TemplateBinding Header}" Style="{StaticResource ContentStyle}"/>
                <bw:ExpandButton Grid.Column="2" x:Name="PART_Expander" IsChecked="{Binding Path=IsExpanded, RelativeSource={RelativeSource TemplatedParent}}"
								  ClickMode="Press"/>
                <Border x:Name="PART_ItemsBorder" MaxHeight="178" Grid.ColumnSpan="3" Grid.Row="1" BorderThickness="0,1,0,0" BorderBrush="DarkGray" Padding="0,3">
                    <ScrollViewer MaxHeight="178" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Hidden">
                        <ScrollViewer.Resources>
                            <sys:Double x:Key="{x:Static SystemParameters.VerticalScrollBarWidthKey}">13</sys:Double>
                        </ScrollViewer.Resources>
                        <ItemsPresenter x:Name="PART_ItemsHost"/>
                    </ScrollViewer>
                </Border>
            </Grid>
        </Border>
        <ControlTemplate.Triggers>
            <Trigger Property="IsExpanded" Value="false">
                <Setter Property="Visibility" TargetName="PART_ItemsBorder" Value="Collapsed"/>
                <Setter Property="Visibility" TargetName="PART_ItemsHost" Value="Collapsed"/>
            </Trigger>
            <Trigger Property="HasItems" Value="false">
                <Setter Property="Visibility" TargetName="PART_Expander" Value="Hidden"/>
                <Setter Property="Visibility" TargetName="PART_ItemsBorder" Value="Collapsed"/>
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>
    <ControlTemplate x:Key="CommandStyle" TargetType="{x:Type TreeViewItem}">
        <Border BorderThickness="0,1,0,0" BorderBrush="DarkGray" Padding="0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <bw:OfficeImage Icon="I00528" Style="{StaticResource ImageStyle}"/>
                <TextBlock Grid.Column="1" Text="{TemplateBinding Header}" Style="{StaticResource ContentStyle}"/>
                <bw:ExpandButton Grid.Column="2" x:Name="PART_Expander" IsChecked="{Binding Path=IsExpanded, RelativeSource={RelativeSource TemplatedParent}}"
								  ClickMode="Press"/>
                <Border x:Name="PART_ItemsBorder" Grid.ColumnSpan="3" Grid.Row="1" BorderThickness="0,1,0,0" BorderBrush="DarkGray" Padding="0,3">
                    <ItemsPresenter x:Name="PART_ItemsHost"/>
                </Border>
            </Grid>
        </Border>
        <ControlTemplate.Triggers>
            <Trigger Property="IsExpanded" Value="false">
                <Setter Property="Visibility" TargetName="PART_ItemsBorder" Value="Collapsed"/>
                <Setter Property="Visibility" TargetName="PART_ItemsHost" Value="Collapsed"/>
            </Trigger>
            <Trigger Property="HasItems" Value="false">
                <Setter Property="Visibility" TargetName="PART_Expander" Value="Hidden"/>
                <Setter Property="Visibility" TargetName="PART_ItemsBorder" Value="Collapsed"/>
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>
    <Style TargetType="{x:Type bw:DesignerEntity}">
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="BorderBrush" Value="DarkGray"/>
        <Setter Property="DataContext" Value="{Binding}"/>
        <Setter Property="Width" Value="{Binding Path=DesignerInfo.Width, Mode=TwoWay}"/>
        <Setter Property="Height" Value="{Binding Path=DesignerInfo.Height, Mode=TwoWay}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type bw:DesignerEntity}">
                    <Border CornerRadius="0"  MaxHeight="{TemplateBinding MaxHeight}" MinWidth="{TemplateBinding MinWidth}"
			  BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                        <Border.Effect>
                            <DropShadowEffect Opacity="0.6" ShadowDepth="1"
				Color="{Binding Path=BorderBrush.Color, RelativeSource={RelativeSource TemplatedParent}}"/>
                        </Border.Effect>
                        <Border.Background>
                            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                <GradientStop Color="#FFCED4DF" Offset="0" />
                                <GradientStop Color="#FFF0F0F0" Offset="1" />
                            </LinearGradientBrush>
                        </Border.Background>
                        <TreeView x:Name="PART_TREEVIEW" Background="Transparent" 
                                Focusable="False" SnapsToDevicePixels="True" UseLayoutRounding="True">
                            <TreeViewItem  DataContext="{Binding}" Header="{Binding ClassName}" SnapsToDevicePixels="True"
                                               UseLayoutRounding="True" Template="{StaticResource EntityTemplate}"
                                               ItemContainerStyle="{StaticResource PropertyNodeStyle}" ItemsSource="{Binding Properties}" IsExpanded="{Binding Expanded, Mode=TwoWay}" />
                            <TreeViewItem DataContext="{Binding Condition}" Header="{Binding EntityName}"  Visibility="{Binding Visibility}"
Template="{StaticResource ConditionTemplate}" ItemContainerStyle="{StaticResource PropertyNodeStyle}"
ItemsSource="{Binding Arguments}" IsExpanded="{Binding Expanded, Mode=TwoWay}" SnapsToDevicePixels="True" UseLayoutRounding="True"/>
                            <TreeViewItem DataContext="{Binding}" Header="Data Commands"  Focusable="False" SnapsToDevicePixels="True" UseLayoutRounding="True"
Template="{StaticResource CommandStyle}" ItemContainerStyle="{StaticResource CommandNodeStyle}" Visibility="{Binding Visibility}"
ItemsSource="{Binding DataCommands}" IsExpanded="{Binding Path=DesignerInfo.Expander, Mode=TwoWay}"/>
                        </TreeView>
                    </Border>
                    <!--<Thumb>
                        <Thumb.Template>
                            <ControlTemplate TargetType="Thumb">
                                
                            </ControlTemplate>
                        </Thumb.Template>
                    </Thumb>-->
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style x:Key="{x:Static MenuItem.SeparatorStyleKey}" TargetType="Separator">
        <Setter Property="OverridesDefaultStyle" Value="true" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Separator}">
                    <Border Height="1" Background="{DynamicResource {x:Static SystemColors.ControlLightBrushKey}}"/>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style TargetType="{x:Type bw:DesignerEntitiesCanvas}">
        <Setter Property="ItemTemplate">
            <Setter.Value>
                <DataTemplate>
                    <bw:DesignerEntity/>
                </DataTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type bw:DesignerEntitiesCanvas}">
                    <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto" Focusable="False" SnapsToDevicePixels="True" UseLayoutRounding="True">
                        <bw:DesignerCanvas x:Name="PART_Canvas" IsItemsHost="True" />
                        <!--<UniformGrid x:Name="PART_Canvas" IsItemsHost="True" ></UniformGrid>-->
                    </ScrollViewer>

                    <!--<ItemsControl x:Name="PART_ITEMS"  ItemsSource="{Binding DataEntities, RelativeSource={RelativeSource TemplatedParent}}">
                        <ItemsControl.Resources>
                           
                        </ItemsControl.Resources>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <bw:DesignerEntity>
                                </bw:DesignerEntity>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                        <ItemsControl.Template>
                            <ControlTemplate>

                            </ControlTemplate>
                        </ItemsControl.Template>
                    </ItemsControl>-->
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>